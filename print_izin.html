<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=400, initial-scale=1.0">
    <style>
<<<<<<< HEAD
        /* Hilangkan margin default browser saat print */
        @page {
            margin: 0;
            size: auto;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-print-color-adjust: exact;
        }

        body {
            width: 400px;
            /* Samakan dengan lebar viewport */
            margin: 0 auto;
            font-family: Arial, sans-serif;
            background: white;
            color: black;
        }

        .ticket {
            width: 100%;
            padding: 10px;
        }

        /* Penyesuaian Font agar proporsional dengan lebar 400px */
        .text-center {
            text-align: center;
        }
=======
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            margin: 0;
            padding: 8px;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            width: 58mm;
            color: #000;
            background: white;
            line-height: 1.3;
        }

        @media print {
            @page {
                margin: 0;
                size: 58mm auto;
            }

            body {
                margin: 0;
                padding: 8px;
            }
>>>>>>> 51cb28ad1fb7b056ba90b7cfcef801fb68fac1ab

        .font-bold {
            font-weight: bold;
        }

        .logo {
            width: 180px;
            /* Ukuran logo lebih besar agar jelas */
            display: block;
            margin: 0 auto 10px;
            filter: grayscale(1);
        }

        .header-title {
            font-size: 16pt;
            line-height: 1.2;
            margin-bottom: 5px;
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            font-size: 12pt;
            margin: 5px 0;
        }

        .label {
            font-size: 10pt;
            text-transform: uppercase;
            margin-top: 10px;
        }

        .value {
            font-size: 14pt;
            font-weight: bold;
            text-transform: uppercase;
        }

        .line {
            border-bottom: 2px solid black;
            margin: 10px 0;
        }

        .line-dashed {
            border-bottom: 2px dashed black;
            margin: 10px 0;
        }

        .return-box {
            border: 3px solid black;
            text-align: center;
            padding: 10px;
            margin: 10px 0;
            font-size: 20pt;
            font-weight: 900;
        }

        .footer {
            font-size: 10pt;
            text-align: center;
            margin-top: 15px;
            line-height: 1.4;
        }

        .header {
            text-align: center;
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 2px solid #000;
        }

        .header .title {
            font-weight: bold;
            font-size: 13px;
            letter-spacing: 0.5px;
            margin-bottom: 3px;
        }

        .header .subtitle {
            font-size: 10px;
            margin-bottom: 2px;
        }

        .divider {
            border-top: 1px dashed #000;
            margin: 8px 0;
        }

        .divider-solid {
            border-top: 1px solid #000;
            margin: 8px 0;
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 4px;
            font-size: 10px;
        }

        .info-row .label {
            font-weight: normal;
        }

        .info-row .value {
            font-weight: bold;
            text-align: right;
        }

        .section-title {
            font-weight: bold;
            font-size: 10px;
            margin: 8px 0 4px 0;
            text-transform: uppercase;
        }

        .highlight-box {
            border: 2px solid #000;
            padding: 8px;
            text-align: center;
            margin: 10px 0;
            background: #f5f5f5;
        }

        .highlight-box .label {
            font-size: 9px;
            font-weight: bold;
            margin-bottom: 4px;
        }

        .highlight-box .time {
            font-size: 13px;
            font-weight: bold;
            letter-spacing: 0.5px;
        }

        .santri-info {
            margin: 8px 0;
            padding: 6px;
            background: #f9f9f9;
            border-left: 3px solid #000;
        }

        .santri-info .name {
            font-weight: bold;
            font-size: 12px;
            margin-bottom: 2px;
        }

        .santri-info .detail {
            font-size: 10px;
        }

        .footer-note {
            text-align: center;
            font-size: 9px;
            margin-top: 10px;
            padding-top: 8px;
            border-top: 1px dashed #000;
            line-height: 1.4;
        }

        .qr-placeholder {
            width: 60px;
            height: 60px;
            margin: 10px auto;
            border: 2px dashed #000;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 8px;
        }
    </style>
</head>

<<<<<<< HEAD
<body>

    <div class="ticket">
        <div class="text-center">
            <img src="https://keamanan.pondoksepanjang.com/LOGO.png" class="logo">
            <div class="header-title font-bold">PPS SHIROTHUL FUQOHA</div>
            <div style="font-size: 12pt; margin-bottom: 10px;">Kartu Izin Keluar</div>
        </div>

        <div class="line"></div>

        <div class="info-row"><span class="font-bold">TGL:</span><span id="p-date">4/1/2026</span></div>
        <div class="info-row"><span class="font-bold">JAM:</span><span id="p-time">19:22</span></div>
        <div class="info-row"><span class="font-bold">CS:</span><span id="p-petugas">TES</span></div>

        <div class="line-dashed"></div>

        <div class="label">Nama Santri:</div>
        <div class="value" id="p-nama">PAIJO</div>
        <div id="p-detail" style="font-size: 11pt;">2C - -</div>

        <div class="label">Keperluan / Tujuan:</div>
        <div class="value" style="font-size: 12pt;" id="p-tujuan">Sakit</div>

        <div class="line" style="border-width: 4px;"></div>

        <div class="text-center font-bold" style="font-size: 12pt;">WAJIB KEMBALI SEBELUM:</div>
        <div class="return-box" id="p-kembali">04/01/2026 03:38</div>

        <div class="footer">
            <b>Simpan kartu ini & serahkan<br>ke petugas saat kembali.</b>
        </div>
    </div>

=======
<body class="bg-white">
    <div id="loading" class="text-center py-4">Memuat...</div>
    <div id="content" class="hidden">
        <!-- HEADER -->
        <div class="header">
            <div class="title">PPS SHIROTHUL FUQOHA</div>
            <div class="subtitle">SURAT IZIN KELUAR</div>
        </div>

        <!-- METADATA -->
        <div class="info-row">
            <span class="label">No. Izin</span>
            <span class="value" id="p-no"></span>
        </div>
        <div class="info-row">
            <span class="label">Tanggal</span>
            <span class="value" id="p-date"></span>
        </div>
        <div class="info-row">
            <span class="label">Jam</span>
            <span class="value" id="p-time"></span>
        </div>
        <div class="info-row">
            <span class="label">Petugas</span>
            <span class="value" id="p-petugas"></span>
        </div>

        <div class="divider-solid"></div>

        <!-- SANTRI INFO -->
        <div class="santri-info">
            <div class="name" id="p-nama"></div>
            <div class="detail" id="p-kelas"></div>
            <div class="detail" id="p-asrama"></div>
        </div>

        <!-- TUJUAN -->
        <div class="section-title">TUJUAN:</div>
        <div style="padding-left: 4px; margin-bottom: 8px;" id="p-tujuan"></div>

        <div class="divider"></div>

        <!-- KETERANGAN -->
        <div id="keterangan-section" class="hidden">
            <div class="section-title">KETERANGAN:</div>
            <div style="padding-left: 4px; margin-bottom: 8px; font-size: 9px;" id="p-ket"></div>
            <div class="divider"></div>
        </div>

        <!-- HIGHLIGHT: WAKTU KEMBALI -->
        <div class="highlight-box">
            <div class="label">WAJIB KEMBALI</div>
            <div class="time" id="p-kembali"></div>
        </div>

        <!-- QR CODE PLACEHOLDER (Optional) -->
        <!-- <div class="qr-placeholder">
            [QR CODE]
        </div> -->

        <!-- FOOTER NOTE -->
        <div class="footer-note">
            Simpan struk ini dengan baik.<br>
            Serahkan ke petugas saat kembali.<br>
            Terlambat = Sanksi
        </div>
    </div>

    <script src="assets/js/main.js"></script>
    <script>
        const params = new URLSearchParams(window.location.search);
        const id = params.get('id');

        if (!id) {
            document.body.innerText = "ID Tidak Valid";
        } else {
            apiCall(`perizinan.php?action=read&id=${id}`).then(res => {
                if (res) {
                    document.getElementById('loading').style.display = 'none';
                    document.getElementById('content').classList.remove('hidden');

                    // Parse dates from MySQL format (YYYY-MM-DD HH:MM:SS)
                    // Replace space with 'T' for proper ISO format
                    const waktuKeluarISO = res.waktu_keluar.replace(' ', 'T');
                    const rencanaKembaliISO = res.rencana_kembali.replace(' ', 'T');

                    const d = new Date(waktuKeluarISO);
                    const k = new Date(rencanaKembaliISO);

                    // No. Izin
                    document.getElementById('p-no').innerText = String(id).padStart(4, '0');

                    // Date & Time
                    document.getElementById('p-date').innerText = d.toLocaleDateString('id-ID', {
                        day: '2-digit',
                        month: '2-digit',
                        year: 'numeric'
                    });
                    document.getElementById('p-time').innerText = d.toLocaleTimeString('id-ID', {
                        hour: '2-digit',
                        minute: '2-digit'
                    });

                    // Petugas
                    const petugasName = res.petugas_nama || 'Admin';
                    document.getElementById('p-petugas').innerText = petugasName.split(' ')[0]; // First name only

                    // Santri Info
                    document.getElementById('p-nama').innerText = res.nama.toUpperCase();
                    document.getElementById('p-kelas').innerText = res.kelas;
                    document.getElementById('p-asrama').innerText = res.asrama;

                    // Tujuan
                    document.getElementById('p-tujuan').innerText = res.tujuan_izin;

                    // Keterangan (jika ada)
                    if (res.keterangan) {
                        document.getElementById('keterangan-section').classList.remove('hidden');
                        document.getElementById('p-ket').innerText = res.keterangan;
                    }

                    // Waktu Kembali
                    document.getElementById('p-kembali').innerText = k.toLocaleString('id-ID', {
                        day: '2-digit',
                        month: '2-digit',
                        hour: '2-digit',
                        minute: '2-digit'
                    });

                    // Auto print
                    setTimeout(() => window.print(), 500);
                } else {
                    document.body.innerText = "Data tidak ditemukan";
                }
            });
        }
    </script>
>>>>>>> 51cb28ad1fb7b056ba90b7cfcef801fb68fac1ab
</body>

</html>